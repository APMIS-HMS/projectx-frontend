<div class="survery">
    <div class="">
        <!-- purchase order details-->
        <div class="inPatient-activityTimeline shadow-RB animated slideInRight" #closeclick>
            <div (click)="onClickClose(true)" class="hide-actionWrap">
                <i class="fa fa-arrow-circle-right" aria-hidden="true"></i>
            </div>
            <div class="purchasedetails">
                <div class="container-width">
                    <div class="row">
                        <div class="col-sm-12 col-md-12 col-xs-12">
                            <h5>Generate Bill for</h5>
                            <h6>{{ title }}</h6>
                            <div class="border-box" *ngIf="drugs.length > 0 && !loading">
                                <div class="mainErr animated shake" [hidden]="mainErr">{{errMsg}}</div>
                                <form [formGroup]="addBillForm" novalidate>
                                    <div class="row">
                                        <div class="col-sm-12 col-md-12" style="margin-top: 20px">
                                            <mat-form-field>
                                                <!-- <mat-select placeholder="Drug" formControlName="drug" class="example-full-width">
                                                    <mat-option *ngFor="let drug of drugs" [(value)]="drug.productId" #productId [attr.data-p-id]="drug.productId" [attr.data-p-fsid]="drug.facilityServiceId" [attr.data-p-sid]="drug.serviceId" [attr.data-p-cid]="drug.categoryId" [attr.data-p-price]="drug.price"
                                                        [attr.data-p-aqty]="drug.availabilty" [attr.data-p-tqty]="drug.totalQuantity" (click)="onClickCustomSearchItem($event, productId)">{{ drug.product }}</mat-option>
                                                </mat-select> -->
                                                <mat-select placeholder="Drug" formControlName="drug" class="example-full-width">
                                                    <mat-option *ngFor="let drug of drugs" [value]="drug" (click)="onClickCustomSearchItem($event, drug)">{{ drug?.productObject?.name }}</mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </div>
                                        <div class="col-sm-12 col-md-12" style="margin-top: 20px; padding: 0;">
                                            <div class="col-xs-6">
                                                <mat-form-field class="example-full-width">
                                                    <input matInput type="number" formControlName="qty" placeholder="Quantity">
                                                </mat-form-field>
                                            </div>
                                            <div class="col-xs-6" style="margin-top: -5px;">
                                                <p>Price: <b>&#x20A6; {{ cost }}</b></p>
                                                <p>Total Price: <b>&#x20A6; {{ totalCost }}</b></p>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-12" style="margin-top: 20px; padding: 0;">
                                            <div style="position:relative;" class="col-xs-12 td-worspace">
                                                <!-- <div class="workspace-count"> Qty Available in {{ stores.length }} Store(s) <span class="badge">{{ qtyInStores }}</span></div>
                                                <ul class="shadow-RB workspace-listWrap animated zoomIn">
                                                    <li *ngFor="let store of stores" class="workspace-listItem">
                                                        <ng-container>
                                                            <span>{{store?.store}}, Qty: {{store?.quantity}}</span>
                                                        </ng-container>
                                                    </li>
                                                    <div class="pointer-wrap"><i class="fa fa-caret-down" aria-hidden="true"></i></div>
                                                </ul> -->
                                            </div>
                                        </div>
                                    </div>
                                </form>
                                <div class="row">
                                    <div class="col-sm-12 col-md-12">
                                        <div class="col-xs-6 no-padding">
                                            <button mat-raised-button [disabled]="!addBillForm.valid" (click)="onClickSaveCost(addBillForm.value, addBillForm.valid);" class="btn btn-default">Save</button>
                                        </div>
                                        <div class="col-xs-6">
                                            <button mat-raised-button (click)="onClickClose($event);" class="btn btn-default">Cancel</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="border-box" *ngIf="drugs.length === 0 && !loading">
                                <div class="prodBatch-item batchItem1" style="text-align: center; width: 100%;">No product to bill from,<br> Please add product to your inventory.</div>
                            </div>
                            <div class="border-box" *ngIf="drugs.length === 0 && loading">
                                <div class="prodBatch-item batchItem1" style="text-align: center; width: 100%;">
                                    <i class="fa fa-circle-o-notch fa-spin fa-3x text-blue" aria-hidden="true"></i>
                                </div>
                            </div>
                        </div>
                    </div><br><br>
                </div>
            </div>
        </div>
    </div>
</div>